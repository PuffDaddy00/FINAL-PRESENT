<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-RECYCLE Profile</title>
    <!-- Google Fonts for "Big Shoulders Display" and "Roboto" -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Big+Shoulders+Display:wght@700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Google Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Link to the new external stylesheet -->
    <link rel="stylesheet" href="styles8.css">
</head>
<body>

    <!-- Header Section -->
    <header class="header">
        <div class="container header-container">
            <a href="logo.png" class="logo-and-name">
                <img src="logo.png" alt="E-RECYCLE Logo" class="header-logo-image">

            </a>
            <div class="flex items-center space-x-6">
                <nav class="nav">
                    <!-- The href attributes are placeholders as this is a single-page app -->
                     <a href="#" class="nav-link"onclick="location.href='index4.html'">Home</a>
                     <a href="#" class="nav-link"onclick="location.href='index6.html'">Submit</a>
                    <a href="#" class="nav-link"onclick="location.href='index7.html'">Submit E-waste</a>
                    
                    <!-- Combined profile icon and "Submitted E-waste" link -->
                    <div class="profile-container">
                        <a href="#" class="profile-button">
                            <img id="profile-icon" src="https://placehold.co/40x40/ccc/fff?text=ðŸ‘¤" alt="Profile Icon" class="profile-icon"></a>
                        <div id="profile-dropdown" class="profile-dropdown">
                            <a href="#" class="profile-dropdown-link" onclick="location.href='index8.html'">Profile</a>
                            <a href="#" class="profile-dropdown-link" onclick="location.href='index2.html'">Logout</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content Section -->
    <main class="main-content">
        <div class="profile-card">
            <!-- Profile Header -->
            <div class="profile-header">
                <img src="" alt="Profile Picture" id="profilePic" class="profile-image">
                <h1 id="profileName" class="profile-name">Jane Doe</h1>
                <p class="profile-motto">Making a difference, one device at a time.</p>
            </div>
            
            <!-- Profile Info Grid -->
            <div class="profile-info-grid">
                <div class="info-item info-box">
                    <label class="info-label">Name</label>
                    <p id="mainName" class="info-text">Jane Doe</p>
                </div>
                <div class="info-item info-box">
                    <label class="info-label">Email</label>
                    <p id="mainEmail" class="info-text">jane.doe@example.com</p>
                </div>
                <div class="info-item info-box">
                    <label class="info-label">Birthday</label>
                    <p id="mainBirthday" class="info-text">January 1, 1995</p>
                </div>
                <div class="info-item info-box">
                    <label class="info-label">Contact</label>
                    <p id="mainContact" class="info-text"> +1 123 456 7890</p>
                </div>
            </div>
            
            <button class="edit-button" onclick="openEditModal()">Edit Profile</button>
        </div>
    </main>
    
    <!-- Edit Profile Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">Edit Profile</h2>
            <input type="text" id="editName" class="modal-input" placeholder="Name">
            <input type="email" id="editEmail" placeholder="Email" class="modal-input">
            <input type="date" id="editBirthday" class="modal-input">
            <input type="text" id="editContact" placeholder="Contact" class="modal-input">
            <label for="editProfilePic" class="modal-label">Update Profile Picture</label>
            <input type="file" id="editProfilePic" accept="image/*" class="modal-file-input">
            <div class="modal-actions">
                <button class="btn save-btn" onclick="saveProfile()">Save</button>
                <button class="btn cancel-btn" onclick="closeEditModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle" class="modal-title"></h2>
            <p id="modalMessage" class="modal-message"></p>
            <button onclick="closeModal()" class="modal-ok-btn">OK</button>
        </div>
    </div>

    <script>
        // Initial profile data
        let profile = {
            name: "Jane Doe",
            email: "jane.doe@example.com",
            birthday: "1995-01-01",
            contact: "+1 123 456 7890",
            profilePic: "https://placehold.co/150x150/ffffff/16a34a?text=U"
        };

        const editModal = document.getElementById('editModal');
        const profileDropdown = document.getElementById('profile-dropdown');
        const profileContainer = document.querySelector('.profile-container');
        const messageModal = document.getElementById('messageModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');

        function updateProfileDisplay() {
            document.getElementById('profileName').textContent = profile.name;
            document.getElementById('mainName').textContent = profile.name;
            document.getElementById('mainEmail').textContent = profile.email;
            document.getElementById('mainBirthday').textContent = new Date(profile.birthday).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('mainContact').textContent = profile.contact;
            document.getElementById('profilePic').src = profile.profilePic;
        }

        function openEditModal() {
            document.getElementById('editName').value = profile.name;
            document.getElementById('editEmail').value = profile.email;
            document.getElementById('editBirthday').value = profile.birthday;
            document.getElementById('editContact').value = profile.contact;
            document.getElementById('editProfilePic').value = ''; // Clear file input
            editModal.style.display = 'flex';
        }

        function closeEditModal() {
            editModal.style.display = 'none';
        }

        function saveProfile() {
            profile.name = document.getElementById('editName').value;
            profile.email = document.getElementById('editEmail').value;
            profile.birthday = document.getElementById('editBirthday').value;
            profile.contact = document.getElementById('editContact').value;

            // Handle new profile picture upload
            const fileInput = document.getElementById('editProfilePic');
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    profile.profilePic = e.target.result;
                    updateProfileDisplay();
                };
                reader.readAsDataURL(file);
            } else {
                updateProfileDisplay();
            }
            
            closeEditModal();
            showMessage("Success", "Profile updated successfully!");
        }

        function showMessage(title, message) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            messageModal.style.display = 'flex';
        }

        function closeModal() {
            messageModal.style.display = 'none';
        }

        // Toggle profile dropdown visibility
        profileContainer.addEventListener('click', (event) => {
            event.stopPropagation();
            profileDropdown.style.display = (profileDropdown.style.display === 'block' ? 'none' : 'block');
        });

        // Hide dropdown when clicking outside
        document.addEventListener('click', (event) => {
            if (!profileContainer.contains(event.target)) {
                profileDropdown.style.display = 'none';
            }
        });

        // Initial render
        updateProfileDisplay();
    </script>
</body>
</html>